import{aX as x,a as v,r as i,b2 as y,j as t,f as a,P as C,Q as M,G as m,T as N,X as b,Y as p,b3 as E,b4 as S}from"./index.9b1955b3.js";import{h as f}from"./moment.4d75c86c.js";import{a as Y}from"./App.ad13b1dc.js";function g({data:s}){var e,o;const l=i.exports.useRef(null);return i.exports.useEffect(()=>{l.current.scrollTop=l.current.scrollHeight},[s==null?void 0:s.messages]),i.exports.useEffect(()=>{const r=d=>{const u=d.deltaY||d.detail||-d.wheelDelta;l.current.scrollTop+=u,d.preventDefault()},c=l.current;return c.addEventListener("wheel",r,{passive:!1}),()=>{c.removeEventListener("wheel",r)}},[]),a("div",{className:"chat-window",children:[a("h2",{children:["Chat with ",(e=s==null?void 0:s.user)==null?void 0:e.name]}),t("ul",{className:"list-group",ref:l,style:{height:"400px",overflow:"hidden"},children:(o=s==null?void 0:s.messages)==null?void 0:o.map(r=>{let c=(r==null?void 0:r.sender)==2;return a("li",{className:`list-group-item d-flex align-items-center justify-content-${c?"end":"start"} px-1`,children:[c&&a("small",{children:[f(r==null?void 0:r.created_at).format("hh:mm on DD MMM YY")," "]}),t("strong",{className:"px-1",children:r==null?void 0:r.message})," ",!c&&a("small",{children:[f(r==null?void 0:r.created_at).format("hh:mm on DD MMM YY")," "]})]},r.id)})})]})}function k({sendMessage:s,support_ticket_id:l}){const[e,o]=i.exports.useState(""),r=u=>{o(u.target.value)},c=()=>{o(""),s({message:e,support_ticket_id:l})};return a("div",{className:"message-input mt-2 d-flex",children:[t("input",{type:"text",className:"form-control",value:e,onChange:r,onKeyUp:u=>{u.key==="Enter"&&c()},placeholder:"Type a message"}),t("button",{className:"btn btn-primary mx-1",onClick:c,children:"Send"})]})}function _(){var d,u,h;const s=Y(),{id:l}=x(),{showData:e,options:o}=v(n=>n.supportCenters);i.exports.useEffect(()=>{l&&s(y(l))},[l]);const r=n=>{(e==null?void 0:e.status)!==(n==null?void 0:n.value)&&s(E({id:l,data:{status:n==null?void 0:n.value}}))},c=async n=>{s(S(n))};return t(i.exports.Fragment,{children:a(C,{children:[a(M,{children:[t("div",{children:a("h4",{children:[(d=e==null?void 0:e.user)==null?void 0:d.name," - ",(u=e==null?void 0:e.user)==null?void 0:u.email]})}),t("div",{className:"d-flex align-items-center",children:(h=o==null?void 0:o.status)==null?void 0:h.map(n=>t(m,{color:(e==null?void 0:e.status)===(n==null?void 0:n.value)?"primary":"secondary",className:"me-1",onClick:()=>r(n),disabled:(e==null?void 0:e.status)===3,children:n==null?void 0:n.label},n.value))})]}),t("hr",{}),t(N,{children:a(b,{children:[t(p,{md:"2"}),a(p,{md:"8",children:[t(g,{data:e}),(e==null?void 0:e.status)!=3&&t(k,{sendMessage:c,support_ticket_id:l})]})]})})]})})}export{_ as default};
